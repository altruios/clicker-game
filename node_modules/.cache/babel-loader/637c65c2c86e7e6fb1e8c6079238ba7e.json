{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\clicker game\\\\clicker-game\\\\src\\\\App.js\";\nimport React from 'react';\nimport './App.css';\nimport gameData from \"./gameData.js\";\nimport Building from \"./Building\";\nimport Resource from \"./Resource\";\nimport Clicker from \"./Clicker\";\nimport Science from \"./Science\";\nimport Upgrade from \"./Upgrade\";\nimport Trader from \"./Trader\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n    this.handleClicker = this.handleClicker.bind(this);\n    this.buyBuilding = this.buyBuilding.bind(this);\n    this.buyScience = this.buyScience.bind(this);\n    this.checkBuyingStatus = this.checkBuyingStatus.bind(this);\n    this.buyState = this.buyStatus.bind(this);\n    this.handleBuildingBuy = this.handleBuildingBuy.bind(this);\n    this.handleUpgrade = this.handleUpgrade.bind(this);\n    this.unlock = this.unlock.bind(this);\n    this.handleBuyScience = this.handleBuyScience.bind(this);\n    this.handleTrade = this.handleTrade.bind(this);\n    this.saveGame = this.saveGame.bind(this);\n  }\n\n  saveGame(state) {\n    const saveState = JSON.stringify(state);\n    console.log(saveState);\n    localStorage.setItem(\"save\", saveState);\n  }\n\n  gameTime() {\n    const gameTick = setInterval(() => {\n      this.state.resources.forEach(resource => this.tickResource(resource));\n    }, 1000);\n    const checkTicks = setInterval(() => {\n      this.state.buildings.forEach(building => this.checkBuyingStatus(building));\n      this.state.sciences.forEach(science => {\n        if (science.isUnlocked) {\n          this.checkBuyingStatus(science);\n        }\n      });\n      this.state.upgrades.forEach(upgrade => {\n        if (upgrade.isUnlocked) {\n          this.checkBuyingStatus(upgrade);\n        }\n      });\n      this.state.traders.forEach(trade => {\n        if (trade.isUnlocked) {\n          this.checkBuyingStatus(trade);\n        }\n      });\n    }, 100);\n  }\n\n  tickResource(resource) {\n    const targetResource = resource;\n    this.setState(prevState => {\n      const newResources = prevState.resources.map(lastResource => {\n        if (lastResource.name === targetResource.name) {\n          resource.amount = Number(Math.min(resource.max, resource.amount + resource.changePerTick).toFixed(4));\n          resource.counterTillStopped = Math.max(0, resource.counterTillStopped - resource.changePerTick);\n        }\n\n        return lastResource;\n      });\n      return {\n        resources: newResources\n      };\n    });\n  }\n\n  componentDidMount(prevProps, prevState) {\n    if (localStorage.getItem(\"save\")) {\n      const savedState = JSON.parse(localStorage.getItem(\"save\"));\n      console.log(savedState.buildings);\n      console.log(this.state.buildings);\n      this.setState({\n        buildings: savedState.buildingData,\n        resources: savedState.resourceData,\n        clickers: savedState.clickerData,\n        sciences: savedState.scienceData,\n        upgrades: savedState.upgradeData,\n        traders: savedState.tradeData\n      });\n    } else {\n      this.setState({\n        buildings: gameData.buildingData,\n        resources: gameData.resourceData,\n        clickers: gameData.clickerData,\n        sciences: gameData.scienceData,\n        upgrades: gameData.upgradeData,\n        traders: gameData.tradeData\n      });\n    }\n\n    this.gameTime();\n  }\n\n  componentDidUpdate() {\n    this.saveGame(this.state);\n  }\n\n  handleBuildingBuy(event) {\n    const name = event.target.name;\n    const targetBuilding = this.state.buildings.find(building => building.name === name);\n\n    if (targetBuilding.isBuyable) {\n      const unlocks = targetBuilding.unlocks;\n\n      if (unlocks.length > 0) {\n        unlocks.forEach(whatToUnlock => this.unlock(whatToUnlock));\n      }\n\n      this.buyBuilding(targetBuilding);\n    }\n  }\n\n  buyBuilding(building) {\n    const increaseObjectArray = building.subjectsOfIncrease;\n    const costObjectArray = building.buyPrice;\n    const name = building.name;\n    this.setState(prevState => {\n      const newResources = prevState.resources.map(resource => {\n        const targetCost = costObjectArray.find(x => x.name === resource.name);\n        const targetIncrease = increaseObjectArray.find(x => x.name === resource.name);\n\n        if (targetIncrease) {\n          console.log(\"increasing the maximum of resource:\", resource);\n          const buildingCount = building.count + 1;\n          const subject = building.subjectsOfIncrease.find(x => x.name === resource.name);\n          const subMax = subject.max;\n          const subAmount = subject.amount;\n          resource.max = Number((resource.max + subMax).toFixed(4));\n          resource.changePerTick = Number((resource.changePerTick + subAmount).toFixed(5));\n        }\n\n        if (targetCost) {\n          console.log(\"this costs this much:\", resource.name, targetCost.cost);\n          resource.amount = Number((resource.amount - targetCost.cost).toFixed(4));\n        }\n\n        return resource;\n      });\n      const newBuildings = prevState.buildings.map(build => {\n        if (building.name === build.name) {\n          build.count = build.count + 1;\n          build.buyPrice.forEach(cost => {\n            cost.cost = Number((cost.cost * build.increaseRatio).toFixed(4));\n          });\n        }\n\n        return build;\n      });\n      return {\n        resources: newResources,\n        buildings: newBuildings\n      };\n    });\n  }\n\n  handleBuyScience(event) {\n    console.log(event);\n    const targetScience = this.state.sciences.find(x => x.name === event.target.name);\n    console.log(targetScience);\n    this.buyScience(targetScience);\n  }\n\n  buyScience(science) {\n    const costObjectArray = science.buyPrice;\n    console.log(costObjectArray);\n    const name = science.name;\n    this.setState(prevState => {\n      const newResources = prevState.resources.map(resource => {\n        const targetCost = costObjectArray.find(x => x.name === resource.name);\n\n        if (targetCost) {\n          resource.amount = Number((resource.amount - targetCost.cost).toFixed(4));\n        }\n\n        return resource;\n      });\n      const newSciences = prevState.sciences.map(scienceBuilding => {\n        if (science.name === scienceBuilding.name) {\n          scienceBuilding.isBought = true;\n        }\n\n        return scienceBuilding;\n      });\n      return {\n        resources: newResources,\n        sciences: newSciences\n      };\n    });\n    console.log(this.state);\n    science.unlocks.forEach(lock => this.unlock(lock));\n  }\n\n  unlock(whatToUnlock) {\n    const unlockType = whatToUnlock.type;\n    console.log(unlockType);\n    console.log(\"unlocking\");\n    this.setState(prevState => {\n      console.log(prevState[unlockType]);\n      const newitems = prevState[unlockType].map(item => {\n        if (whatToUnlock.name === item.name) {\n          console.log(whatToUnlock.name, \"isunlocking\");\n          item.isUnlocked = true;\n        }\n\n        return item;\n      });\n      return {\n        [unlockType]: newitems\n      };\n    });\n  }\n\n  handleClicker(event) {\n    console.log(event);\n    console.log(event.target);\n    const {\n      name\n    } = event.target;\n    this.setState(prevState => {\n      const targetClicker = prevState.clickers.find(x => x.name === name);\n\n      if (targetClicker === undefined) {\n        console.error(\"undefined,\", name);\n      }\n\n      const newResources = prevState.resources.map(resource => {\n        const targetIncrease = targetClicker.subjectsOfIncrease.find(x => x.name === resource.name);\n\n        if (targetIncrease) {\n          resource.amount = Number(Math.min(resource.max, resource.amount + targetIncrease.amount).toFixed(4));\n        }\n\n        return resource;\n      });\n      return {\n        resources: newResources\n      };\n    });\n  }\n\n  handleUpgrade(event) {\n    const name = event.target.name;\n    const targetUpgrade = this.state.upgrades.find(x => x.name === name);\n    const type = targetUpgrade.type;\n    const subjects = targetUpgrade.subjectsOfIncrease;\n    subjects.forEach(subject => {\n      this.setState(prevState => {\n        const newItems = prevState[type].map(item => {\n          if (item.name === subject.name) {\n            const newSubjects = item.subjectsOfIncrease.map(x => {\n              x.amount = Number((x.amount + subject.amount).toFixed(4));\n              return x;\n            });\n            console.log(\"new subjects\");\n            item.subjectsOfIncrease = newSubjects;\n            console.log(item);\n          }\n\n          return item;\n        });\n        const newUpgrades = prevState.upgrades.map(upgrade => {\n          if (upgrade.name === name) {\n            const newPrice = upgrade.buyPrice.map(price => {\n              price.cost = Number((price.cost * 1.54).toFixed(4));\n              return price;\n            });\n            upgrade.buyPrice = newPrice;\n            upgrade.count = upgrade.count + 1;\n            console.log(newPrice);\n          }\n\n          return upgrade;\n        });\n        return {\n          [type]: newItems,\n          upgrades: newUpgrades\n        };\n      });\n    });\n  }\n\n  handleTrade(event) {\n    const targetTrader = this.state.traders.find(x => x.name === event.target.name);\n    const targetItem = event.target.value;\n    console.log(event.target.className, \"is classname\");\n    this.setState(prevState => {\n      const newResources = prevState.resources.map(resource => {\n        if (resource.name === targetTrader.tradeRatios.name) {\n          const tradeRatio = targetTrader.tradeRatios.in;\n          resource.amount = Number((resource.amount - tradeRatio).toFixed(4));\n        }\n\n        if (resource.name === targetItem) {\n          console.log(\"adding to \", resource.name, \"becuase target is\", targetItem);\n          const tradeRatio = targetTrader.tradeRatios.out;\n          resource.amount = Number((resource.amount + tradeRatio).toFixed(4));\n        }\n\n        return resource;\n      });\n      return {\n        resources: newResources\n      };\n    });\n  }\n\n  checkBuyingStatus(item) {\n    let type = item.itemType;\n    this.setState(prevState => {\n      const targetResources = prevState.resources.filter(resource => {\n        const targetBuyPriceObject = item.buyPrice.find(x => x.name === resource.name);\n\n        if (targetBuyPriceObject) {\n          return resource;\n        }\n      });\n      const newItem = prevState[type].map(build => {\n        if (build.name === item.name) {\n          const buyStatus = this.buyStatus(targetResources, item.buyPrice);\n          build.isBuyable = buyStatus;\n\n          if (buyStatus) {\n            build.isUnlocked = true;\n          }\n        }\n\n        return build;\n      });\n      return {\n        [type]: newItem\n      };\n    });\n  }\n\n  buyStatus(resourceArray, costArray) {\n    let buyStatus = false;\n    let buyLength = costArray.length;\n    resourceArray.forEach(resource => {\n      const targetCost = costArray.find(x => x.name === resource.name);\n\n      if (targetCost.cost <= resource.amount) {\n        buyLength = buyLength - 1;\n      }\n    });\n\n    if (buyLength === 0) {\n      buyStatus = true;\n    }\n\n    return buyStatus;\n  }\n\n  render() {\n    const buildings = this.state.buildings.map(buildingData => {\n      return /*#__PURE__*/React.createElement(Building, {\n        key: buildingData.id,\n        name: buildingData.name,\n        currentPrices: this.state.resources,\n        handleBuildingBuy: this.handleBuildingBuy,\n        buyPrice: buildingData.buyPrice,\n        count: buildingData.count,\n        subjectsOfIncrease: buildingData.subjectsOfIncrease,\n        isBuyable: buildingData.isBuyable,\n        isUnlocked: buildingData.isUnlocked,\n        subjectData: buildingData.subjectsOfIncrease,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 9\n        }\n      });\n    });\n    const resources = this.state.resources.map(resourceData => {\n      return /*#__PURE__*/React.createElement(Resource, {\n        name: resourceData.name,\n        max: resourceData.max,\n        isUnlocked: resourceData.isUnlocked,\n        changePerTick: resourceData.changePerTick,\n        amount: resourceData.amount,\n        key: resourceData.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 9\n        }\n      });\n    });\n    const clickers = this.state.clickers.map(clickerData => {\n      return /*#__PURE__*/React.createElement(Clicker, {\n        name: clickerData.name,\n        handleClicker: this.handleClicker,\n        subjectData: clickerData.subjectsOfIncrease,\n        key: clickerData.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 9\n        }\n      });\n    });\n    const sciences = this.state.sciences.map(scienceData => {\n      return /*#__PURE__*/React.createElement(Science, {\n        key: scienceData.id,\n        name: scienceData.name,\n        handleBuyScience: this.handleBuyScience,\n        isBought: scienceData.isBought,\n        currentPrices: this.state.resources,\n        isUnlocked: scienceData.isUnlocked,\n        description: scienceData.description,\n        isBuyable: scienceData.isBuyable,\n        buyPrice: scienceData.buyPrice,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 9\n        }\n      });\n    });\n    const upgrades = this.state.upgrades.map(upgradeData => {\n      return /*#__PURE__*/React.createElement(Upgrade, {\n        key: upgradeData.id,\n        name: upgradeData.name,\n        buyPrice: upgradeData.buyPrice,\n        amount: upgradeData.amount,\n        isUnlocked: upgradeData.isUnlocked,\n        isBuyable: upgradeData.isBuyable,\n        upgradeType: upgradeData.type,\n        count: upgradeData.count,\n        handleUpgrade: this.handleUpgrade,\n        currentPrices: this.state.resources,\n        subjectData: upgradeData.subjectsOfIncrease,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 9\n        }\n      });\n    });\n    const traders = this.state.traders.map(traderData => {\n      const canTradeWith = this.state.resources.filter(resource => traderData.tradeRatios.allowed === resource.type);\n      return /*#__PURE__*/React.createElement(Trader, {\n        key: traderData.id,\n        name: traderData.name,\n        tradeRatio: traderData.tradeRatios,\n        isUnlocked: traderData.isUnlocked,\n        isBuyable: traderData.isBuyable,\n        handleTrade: this.handleTrade,\n        canTradeWith: canTradeWith,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 9\n        }\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }\n    }, \"COLOR CLICKER\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"buildingContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 9\n      }\n    }, buildings), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resourceContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 9\n      }\n    }, resources), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clickerContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }\n    }, clickers), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"scienceContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 9\n      }\n    }, \" \", sciences), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"upgradeContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 9\n      }\n    }, upgrades), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"traderContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 9\n      }\n    }, traders));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/xampp/htdocs/clicker game/clicker-game/src/App.js"],"names":["React","gameData","Building","Resource","Clicker","Science","Upgrade","Trader","App","Component","constructor","state","handleClicker","bind","buyBuilding","buyScience","checkBuyingStatus","buyState","buyStatus","handleBuildingBuy","handleUpgrade","unlock","handleBuyScience","handleTrade","saveGame","saveState","JSON","stringify","console","log","localStorage","setItem","gameTime","gameTick","setInterval","resources","forEach","resource","tickResource","checkTicks","buildings","building","sciences","science","isUnlocked","upgrades","upgrade","traders","trade","targetResource","setState","prevState","newResources","map","lastResource","name","amount","Number","Math","min","max","changePerTick","toFixed","counterTillStopped","componentDidMount","prevProps","getItem","savedState","parse","buildingData","resourceData","clickers","clickerData","scienceData","upgradeData","tradeData","componentDidUpdate","event","target","targetBuilding","find","isBuyable","unlocks","length","whatToUnlock","increaseObjectArray","subjectsOfIncrease","costObjectArray","buyPrice","targetCost","x","targetIncrease","buildingCount","count","subject","subMax","subAmount","cost","newBuildings","build","increaseRatio","targetScience","newSciences","scienceBuilding","isBought","lock","unlockType","type","newitems","item","targetClicker","undefined","error","targetUpgrade","subjects","newItems","newSubjects","newUpgrades","newPrice","price","targetTrader","targetItem","value","className","tradeRatios","tradeRatio","in","out","itemType","targetResources","filter","targetBuyPriceObject","newItem","resourceArray","costArray","buyLength","render","id","description","traderData","canTradeWith","allowed"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './App.css';\r\nimport gameData from \"./gameData.js\"\r\nimport Building from \"./Building\"\r\nimport Resource from \"./Resource\"\r\nimport Clicker from \"./Clicker\"\r\nimport Science from \"./Science\"\r\nimport Upgrade from \"./Upgrade\"\r\nimport Trader from \"./Trader\"\r\n\r\nclass App extends React.Component \r\n  {\r\n  constructor()\r\n    {\r\n    super();\r\n    this.state = {};\r\n   this.handleClicker = this.handleClicker.bind(this);\r\n   this.buyBuilding = this.buyBuilding.bind(this);\r\n   this.buyScience = this.buyScience.bind(this);\r\n   this.checkBuyingStatus = this.checkBuyingStatus.bind(this);\r\n   this.buyState = this.buyStatus.bind(this);\r\n   this.handleBuildingBuy = this.handleBuildingBuy.bind(this);\r\n   this.handleUpgrade = this.handleUpgrade.bind(this);\r\n   this.unlock = this.unlock.bind(this);\r\n   this.handleBuyScience=this.handleBuyScience.bind(this);\r\n   this.handleTrade=this.handleTrade.bind(this);\r\n      this.saveGame=this.saveGame.bind(this);\r\n\r\n  }\r\n  saveGame(state){\r\n\r\n    const saveState = JSON.stringify(state);\r\n    console.log(saveState);\r\n    localStorage.setItem(\"save\",saveState);\r\n  }\r\n  gameTime()\r\n    {\r\n    const gameTick = setInterval(()=>\r\n      {\r\n\r\n      this.state.resources.forEach(resource=>this.tickResource(resource));\r\n    },1000);\r\n    const checkTicks = setInterval(()=>\r\n      {\r\n      this.state.buildings.forEach(building=>this.checkBuyingStatus(building));\r\n\r\n      this.state.sciences.forEach(science=>{\r\n        if(science.isUnlocked){\r\n          this.checkBuyingStatus(science);\r\n        }\r\n      });\r\n      this.state.upgrades.forEach(upgrade=>{\r\n        if(upgrade.isUnlocked){\r\n          this.checkBuyingStatus(upgrade);\r\n        }\r\n      })\r\n      this.state.traders.forEach(trade=>{\r\n        if(trade.isUnlocked)\r\n          {\r\n          this.checkBuyingStatus(trade);\r\n        }\r\n      })\r\n    },100);\r\n    \r\n  }\r\n\r\n  tickResource(resource)\r\n    {\r\n    const targetResource = resource;  \r\n    this.setState((prevState) =>\r\n      {  \r\n      const newResources = prevState.resources.map(lastResource=>\r\n        {\r\n        if(lastResource.name === targetResource.name)\r\n          {\r\n          resource.amount = Number(Math.min(resource.max,resource.amount + resource.changePerTick).toFixed(4));\r\n          resource.counterTillStopped = Math.max(0, resource.counterTillStopped - resource.changePerTick);\r\n        }\r\n        return lastResource;\r\n      }); \r\n\r\n      return {resources: newResources}\r\n    });\r\n  }\r\n\r\n  componentDidMount(prevProps, prevState)\r\n    {\r\n    if(localStorage.getItem(\"save\")) \r\n      {\r\n      const savedState = JSON.parse(localStorage.getItem(\"save\"));\r\n      console.log(savedState.buildings);\r\n      console.log(this.state.buildings);\r\n      this.setState(\r\n        {\r\n        buildings:savedState.buildingData,\r\n        resources:savedState.resourceData,\r\n        clickers:savedState.clickerData,\r\n        sciences:savedState.scienceData,\r\n        upgrades:savedState.upgradeData,\r\n        traders:savedState.tradeData  \r\n      })\r\n\r\n    }\r\n    else{\r\n      this.setState(\r\n        {\r\n        buildings:gameData.buildingData,\r\n        resources:gameData.resourceData,\r\n        clickers:gameData.clickerData,\r\n        sciences:gameData.scienceData,\r\n        upgrades:gameData.upgradeData,\r\n        traders:gameData.tradeData\r\n      })\r\n    }\r\n    this.gameTime(); \r\n  }\r\n  componentDidUpdate()\r\n    {\r\n    this.saveGame(this.state);\r\n  }\r\n  handleBuildingBuy(event)  \r\n    {\r\n    const name = event.target.name;\r\n    const targetBuilding = this.state.buildings.find(building=>building.name === name)\r\n    if(targetBuilding.isBuyable) \r\n      {\r\n      const unlocks = targetBuilding.unlocks;\r\n      if(unlocks.length>0)\r\n        {\r\n        unlocks.forEach(whatToUnlock=>this.unlock(whatToUnlock));\r\n      \r\n         }\r\n\r\n\r\n      \r\n      this.buyBuilding(targetBuilding);\r\n    }\r\n  }\r\n  buyBuilding(building) \r\n    { \r\n    const increaseObjectArray = building.subjectsOfIncrease; \r\n    const costObjectArray = building.buyPrice \r\n    const name = building.name;\r\n    this.setState(prevState=>\r\n      {\r\n     \r\n      const newResources= prevState.resources.map(resource=>\r\n        {\r\n        const targetCost = costObjectArray.find(x=>x.name === resource.name);    \r\n        const targetIncrease = increaseObjectArray.find(x=>x.name===resource.name);\r\n        if(targetIncrease)\r\n          {\r\n           console.log(\"increasing the maximum of resource:\",resource) \r\n          const buildingCount = (building.count + 1);\r\n          const subject = building.subjectsOfIncrease.find(x=>x.name===resource.name);\r\n          const subMax = subject.max;\r\n          const subAmount = subject.amount;\r\n          resource.max = Number((resource.max + subMax).toFixed(4));\r\n          resource.changePerTick = Number((resource.changePerTick + subAmount).toFixed(5));\r\n        }\r\n        if(targetCost)\r\n          {\r\n           console.log(\"this costs this much:\", resource.name, targetCost.cost) \r\n          resource.amount = Number((resource.amount - targetCost.cost).toFixed(4)); \r\n        }\r\n\r\n\r\n        return resource;\r\n      });\r\n      const newBuildings = prevState.buildings.map(build=>\r\n        {\r\n        if(building.name === build.name)\r\n          {\r\n          build.count = build.count + 1;\r\n          build.buyPrice.forEach(cost=>\r\n            {\r\n            cost.cost = Number((cost.cost * build.increaseRatio).toFixed(4));\r\n          })\r\n\r\n        }\r\n         return build;\r\n      });\r\n\r\n      return{\r\n        resources:newResources,\r\n        buildings:newBuildings,\r\n      }\r\n    });\r\n\r\n  }\r\n  handleBuyScience(event){\r\n    console.log(event);\r\n    const targetScience = this.state.sciences.find(x=>x.name===event.target.name);\r\n    console.log(targetScience);\r\n    this.buyScience(targetScience);\r\n  } \r\n  buyScience(science)\r\n    {\r\n    const costObjectArray = science.buyPrice;\r\n    console.log(costObjectArray) \r\n    const name = science.name;\r\n    this.setState(prevState=>\r\n      {\r\n      const newResources= prevState.resources.map(resource=>\r\n        {\r\n        const targetCost = costObjectArray.find(x=>x.name === resource.name);    \r\n        if(targetCost)\r\n          {\r\n          resource.amount = Number((resource.amount - targetCost.cost).toFixed(4)); \r\n        }\r\n        return resource;\r\n      });\r\n      const newSciences = prevState.sciences.map(scienceBuilding=>\r\n        {\r\n        if(science.name === scienceBuilding.name)\r\n          {\r\n          scienceBuilding.isBought = true;\r\n          \r\n        }\r\n         return scienceBuilding;\r\n      });\r\n\r\n      return{\r\n        resources:newResources,\r\n        sciences:newSciences,\r\n      }\r\n    });\r\n    console.log(this.state);\r\n    science.unlocks.forEach(lock=>this.unlock(lock));\r\n\r\n\r\n\r\n  }\r\n  unlock(whatToUnlock)\r\n    {\r\n      const unlockType = whatToUnlock.type;\r\n      console.log(unlockType);\r\n      console.log(\"unlocking\");\r\n        this.setState((prevState)=>\r\n          {\r\n           console.log(prevState[unlockType]); \r\n          const newitems = prevState[unlockType].map(item=>\r\n            {\r\n            if(whatToUnlock.name === item.name)\r\n              {\r\n              console.log(whatToUnlock.name,\"isunlocking\");  \r\n              item.isUnlocked = true;\r\n            }\r\n            return item;\r\n          });\r\n          return {[unlockType]:newitems}\r\n        });\r\n    \r\n  }\r\n  handleClicker(event)\r\n    {\r\n     console.log(event);\r\n     console.log(event.target); \r\n    const {name} = event.target;  \r\n    this.setState(prevState=>\r\n      {\r\n      const targetClicker = prevState.clickers.find(x=>x.name === name);\r\n      if(targetClicker === undefined)\r\n        {\r\n        console.error(\"undefined,\",name);}\r\n      const newResources = prevState.resources.map(resource=>\r\n          {\r\n           const targetIncrease =  targetClicker.subjectsOfIncrease.find(x=>x.name===resource.name)\r\n          if(targetIncrease)\r\n            {\r\n            resource.amount = Number(Math.min(resource.max,resource.amount + targetIncrease.amount).toFixed(4));\r\n          }\r\n          return resource;\r\n        });\r\n\r\n\r\n      return {resources:newResources}\r\n    });\r\n\r\n  }\r\n  handleUpgrade(event)\r\n    {\r\n    const name = event.target.name;\r\n    const targetUpgrade = this.state.upgrades.find(x=>x.name===name);\r\n    const type = targetUpgrade.type;\r\n    const subjects = targetUpgrade.subjectsOfIncrease;\r\n    subjects.forEach(subject=>\r\n      {\r\n      this.setState(prevState=>\r\n        {\r\n\r\n        const newItems = prevState[type].map(item=>\r\n          {\r\n          if(item.name === subject.name)\r\n            {\r\n            const newSubjects = item.subjectsOfIncrease.map((x)=>\r\n              {\r\n              x.amount = Number((x.amount + subject.amount).toFixed(4));\r\n              return x;\r\n            });\r\n            console.log(\"new subjects\");\r\n            item.subjectsOfIncrease = newSubjects;\r\n            console.log(item)\r\n           \r\n          }\r\n          return item;\r\n        })\r\n        const newUpgrades = prevState.upgrades.map(upgrade=>\r\n          {\r\n          if(upgrade.name === name) \r\n            {\r\n            const newPrice = upgrade.buyPrice.map(price=>\r\n              {\r\n              price.cost = Number((price.cost*1.54).toFixed(4));\r\n              return price;\r\n            })\r\n            upgrade.buyPrice = newPrice;\r\n            upgrade.count = upgrade.count + 1;\r\n            console.log(newPrice);\r\n          }\r\n          return upgrade;\r\n        })\r\n      \r\n\r\n        return {[type]:newItems, upgrades:newUpgrades}\r\n\r\n    });\r\n    });\r\n  }\r\n\r\n  handleTrade(event){\r\n    const targetTrader = this.state.traders.find(x=>x.name===event.target.name);\r\n    const targetItem = event.target.value;\r\n    console.log(event.target.className, \"is classname\");\r\n\r\n\r\n    this.setState(prevState=>{\r\n      const newResources = prevState.resources.map(resource=>{\r\n        if(resource.name ===targetTrader.tradeRatios.name)\r\n          {\r\n          const tradeRatio = targetTrader.tradeRatios.in; \r\n          resource.amount = Number((resource.amount - tradeRatio).toFixed(4));\r\n        }\r\n        if(resource.name ===targetItem)\r\n          {\r\n           console.log(\"adding to \", resource.name,\"becuase target is\", targetItem) \r\n          const tradeRatio = targetTrader.tradeRatios.out;\r\n          resource.amount = Number((resource.amount + tradeRatio).toFixed(4));\r\n\r\n        }\r\n      return resource;\r\n      });\r\n\r\n\r\n      return{resources:newResources}\r\n    })\r\n  }\r\n\r\n\r\n  checkBuyingStatus(item)\r\n    {\r\n     let type = item.itemType; \r\n    this.setState((prevState)=>\r\n      {  \r\n      const targetResources = prevState.resources.filter((resource)=>\r\n        {\r\n        const targetBuyPriceObject = item.buyPrice.find(x=>x.name===resource.name);  \r\n        if(targetBuyPriceObject)\r\n          {\r\n          return resource;\r\n        }\r\n      });\r\n      \r\n      const newItem = prevState[type].map((build)=>\r\n        {\r\n        if(build.name === item.name)\r\n          { \r\n          const buyStatus =  this.buyStatus(targetResources, item.buyPrice);\r\n\r\n          build.isBuyable = buyStatus;\r\n\r\n          if(buyStatus){\r\n            build.isUnlocked = true;\r\n          }\r\n        }\r\n\r\n        return build;\r\n      });\r\n\r\n    return{[type]:newItem};\r\n    });\r\n  }\r\n\r\n  buyStatus(resourceArray, costArray)\r\n    {\r\n    let buyStatus = false;\r\n    let buyLength = costArray.length;\r\n    resourceArray.forEach(resource=>  \r\n      {\r\n      const targetCost = costArray.find(x=>x.name===resource.name);\r\n      if(targetCost.cost<=resource.amount) \r\n        {\r\n        buyLength = buyLength - 1;\r\n      }\r\n    });\r\n    if(buyLength === 0)\r\n      {\r\n      buyStatus = true;\r\n    }\r\n\r\n    return buyStatus;\r\n  }\r\n  render()\r\n    {\r\n    const buildings = this.state.buildings.map(buildingData=>\r\n      {\r\n      return(\r\n        <Building \r\n          key={buildingData.id}\r\n          name ={buildingData.name}\r\n          currentPrices = {this.state.resources}\r\n          handleBuildingBuy={this.handleBuildingBuy}\r\n          buyPrice={buildingData.buyPrice}\r\n          count = {buildingData.count}\r\n          subjectsOfIncrease = {buildingData.subjectsOfIncrease}\r\n          isBuyable = {buildingData.isBuyable}\r\n          isUnlocked = {buildingData.isUnlocked}\r\n          subjectData = {buildingData.subjectsOfIncrease}\r\n          \r\n        />)\r\n    });\r\n    const resources = this.state.resources.map(resourceData=>\r\n      {\r\n      return(\r\n        <Resource \r\n          name ={resourceData.name}\r\n          max = {resourceData.max}\r\n          isUnlocked = {resourceData.isUnlocked}\r\n          changePerTick = {resourceData.changePerTick}\r\n          amount={resourceData.amount}\r\n          key={resourceData.name}\r\n\r\n        />)\r\n    });   \r\n    const clickers = this.state.clickers.map(clickerData=>\r\n      {\r\n      return(\r\n        <Clicker\r\n          name={clickerData.name} \r\n          handleClicker = {this.handleClicker}\r\n          subjectData = {clickerData.subjectsOfIncrease}\r\n          key={clickerData.name}\r\n        />\r\n\r\n      )\r\n    });\r\n\r\n    const sciences = this.state.sciences.map(scienceData=>{\r\n      return(\r\n        <Science\r\n          key={scienceData.id}\r\n          name={scienceData.name}\r\n          handleBuyScience = {this.handleBuyScience}\r\n          isBought = {scienceData.isBought}\r\n          currentPrices = {this.state.resources}\r\n\r\n          isUnlocked = {scienceData.isUnlocked}\r\n          description = {scienceData.description}\r\n          isBuyable = {scienceData.isBuyable}\r\n          buyPrice = {scienceData.buyPrice} />\r\n        )\r\n    })\r\n    const upgrades = this.state.upgrades.map(upgradeData=>{\r\n      return(\r\n        <Upgrade \r\n          key={upgradeData.id}\r\n          name = {upgradeData.name}\r\n          buyPrice = {upgradeData.buyPrice}\r\n          amount={upgradeData.amount}\r\n          isUnlocked = {upgradeData.isUnlocked}\r\n          isBuyable = {upgradeData.isBuyable}\r\n          upgradeType = {upgradeData.type}\r\n          count={upgradeData.count}\r\n          handleUpgrade = {this.handleUpgrade}\r\n          currentPrices = {this.state.resources}\r\n          subjectData={upgradeData.subjectsOfIncrease}\r\n\r\n        />\r\n        )\r\n    })\r\n    const traders = this.state.traders.map(traderData=>{\r\n      const canTradeWith = this.state.resources.filter(resource=>traderData.tradeRatios.allowed === resource.type);\r\n      return(\r\n        <Trader\r\n          key={traderData.id}\r\n          name = {traderData.name}\r\n          tradeRatio = {traderData.tradeRatios}\r\n          isUnlocked = {traderData.isUnlocked}\r\n          isBuyable = {traderData.isBuyable}\r\n          handleTrade = {this.handleTrade}\r\n          canTradeWith = {canTradeWith}\r\n         />\r\n\r\n\r\n\r\n\r\n        )\r\n\r\n\r\n    })\r\n\r\n\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <div className=\"title\">COLOR CLICKER</div>\r\n        <div className=\"buildingContainer\">{buildings}</div>\r\n        <div className=\"resourceContainer\">{resources}</div>\r\n        <div className=\"clickerContainer\">{clickers}</div>\r\n        <div className=\"scienceContainer\"> {sciences}</div>\r\n        <div className=\"upgradeContainer\">{upgrades}</div>\r\n        <div className=\"traderContainer\">{traders}</div>\r\n      </div>\r\n    );\r\n  } \r\n}\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}